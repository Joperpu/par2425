
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://joperpu.github.io/par2425/pr4.5/">
      
      
        <link rel="prev" href="../pr4.4/">
      
      
        <link rel="next" href="../ud5/">
      
      
      <link rel="icon" href="../assets/images/logo.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Práctica 4.5 - Planificación y administración de redes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-45-dhcp" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="Planificación y administración de redes" class="md-header__button md-logo" aria-label="Planificación y administración de redes" data-md-component="logo">
      
  <img src="../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Planificación y administración de redes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica 4.5
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Planificación y administración de redes" class="md-nav__button md-logo" aria-label="Planificación y administración de redes" data-md-component="logo">
      
  <img src="../assets/images/logo.png" alt="logo">

    </a>
    Planificación y administración de redes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Página principal
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UD1 - Introducción a las redes de comunicaciones
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            UD1 - Introducción a las redes de comunicaciones
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ud1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teoría UD1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr1.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 1.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr1.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 1.2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr1.3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 1.3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr1.4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 1.4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr1.5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 1.5
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UD2 - Integración de elementos de una red
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            UD2 - Integración de elementos de una red
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ud2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teoría UD2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr2.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr2.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr2.3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr2.4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr2.5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr2.6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.6
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr2.7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.7
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr2.8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.8
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UD3 - Configuración y administración de conmutadores
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            UD3 - Configuración y administración de conmutadores
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ud3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teoría UD3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr3.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 3.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr3.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 3.2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr3.3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 3.3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr3.4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 3.4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr3.5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 3.5
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UD4 - Configuración y administración básica de routers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            UD4 - Configuración y administración básica de routers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ud4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teoría UD4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr4.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 4.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr4.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 4.2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr4.3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 4.3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr4.4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 4.4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Práctica 4.5
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Práctica 4.5
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introducción">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#terminologia-dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      Terminología DHCP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      DHCPv4
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DHCPv4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funcionamiento-del-protocolo" class="md-nav__link">
    <span class="md-ellipsis">
      Funcionamiento del protocolo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Funcionamiento del protocolo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#el-cliente-dispone-de-una-concesion-previa" class="md-nav__link">
    <span class="md-ellipsis">
      El cliente dispone de una concesión previa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#el-cliente-no-dispone-de-una-concesion-previa" class="md-nav__link">
    <span class="md-ellipsis">
      El cliente no dispone de una concesión previa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intercambio-de-mensajes-del-protocolo" class="md-nav__link">
    <span class="md-ellipsis">
      Intercambio de mensajes del protocolo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurar-un-servidor-dhcpv4-basico" class="md-nav__link">
    <span class="md-ellipsis">
      Configurar un servidor DHCPv4 básico
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configurar un servidor DHCPv4 básico">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-excluir-direcciones-ipv4" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Excluir direcciones IPv4
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-crear-un-pool-dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Crear un pool DHCPv4
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-configurar-los-tipos-de-opciones-en-el-pool-dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3: Configurar los tipos de opciones en el pool DHCPv4
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verificacion-del-servicio-dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      Verificación del servicio DHCPv4
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-un-router-como-cliente-dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de un router como cliente DHCPv4
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#descripcion-de-la-practica" class="md-nav__link">
    <span class="md-ellipsis">
      Descripción de la práctica
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entrega-de-la-practica" class="md-nav__link">
    <span class="md-ellipsis">
      Entrega de la práctica
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UD5 - Redes locales virtuales
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            UD5 - Redes locales virtuales
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ud5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teoría UD5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr5.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 5.1
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UD7 - Conexión a redes de área extensa
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            UD7 - Conexión a redes de área extensa
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ud7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teoría UD7
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pr7.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 7.1
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introducción">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#terminologia-dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      Terminología DHCP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      DHCPv4
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DHCPv4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funcionamiento-del-protocolo" class="md-nav__link">
    <span class="md-ellipsis">
      Funcionamiento del protocolo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Funcionamiento del protocolo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#el-cliente-dispone-de-una-concesion-previa" class="md-nav__link">
    <span class="md-ellipsis">
      El cliente dispone de una concesión previa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#el-cliente-no-dispone-de-una-concesion-previa" class="md-nav__link">
    <span class="md-ellipsis">
      El cliente no dispone de una concesión previa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intercambio-de-mensajes-del-protocolo" class="md-nav__link">
    <span class="md-ellipsis">
      Intercambio de mensajes del protocolo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurar-un-servidor-dhcpv4-basico" class="md-nav__link">
    <span class="md-ellipsis">
      Configurar un servidor DHCPv4 básico
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configurar un servidor DHCPv4 básico">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-excluir-direcciones-ipv4" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Excluir direcciones IPv4
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-crear-un-pool-dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Crear un pool DHCPv4
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-configurar-los-tipos-de-opciones-en-el-pool-dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3: Configurar los tipos de opciones en el pool DHCPv4
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verificacion-del-servicio-dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      Verificación del servicio DHCPv4
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-un-router-como-cliente-dhcpv4" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de un router como cliente DHCPv4
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#descripcion-de-la-practica" class="md-nav__link">
    <span class="md-ellipsis">
      Descripción de la práctica
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entrega-de-la-practica" class="md-nav__link">
    <span class="md-ellipsis">
      Entrega de la práctica
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-45-dhcp">Práctica 4.5 - DHCP</h1>
<h2 id="introduccion">Introducción</h2>
<p>Todo dispositivo que se conecta a una red necesita contar con una dirección IP única. En general, los administradores de red asignan direcciones IP estáticas a aquellos dispositivos cuya ubicación, tanto física como lógica, permanece estable en el tiempo. Esto incluye equipos como routers, servidores, impresoras y otros dispositivos de infraestructura que proporcionan servicios esenciales dentro de la red.</p>
<p>Estas direcciones deben ser constantes, ya que la estabilidad facilita su administración remota. Resulta mucho más sencillo para un administrador localizar y gestionar un dispositivo cuando su dirección IP es conocida y no cambia.</p>
<p>Por el contrario, los equipos de usuario, como PCs o dispositivos móviles, pueden cambiar de ubicación con frecuencia. En estos casos, asignar manualmente una nueva dirección IP cada vez que el dispositivo cambia de red o de ubicación puede ser una tarea lenta y propensa a errores. Esto se complica aún más cuando se trata de empleados móviles o usuarios que trabajan desde sedes remotas, donde la configuración manual de parámetros de red puede ser poco práctica o inviable.</p>
<p>Incluso en entornos de escritorio, la asignación manual de direcciones IP y parámetros relacionados supone una carga considerable de trabajo para los administradores, especialmente cuando la red crece y se vuelve más compleja.</p>
<p>Para simplificar esta tarea, se recurre a un servidor DHCP (Dynamic Host Configuration Protocol) en la red local. La incorporación de este servicio permite asignar direcciones IP de forma automática tanto a dispositivos de escritorio como a dispositivos móviles. Gracias a un servidor DHCP centralizado, las organizaciones pueden gestionar todas las asignaciones desde un único punto, lo que mejora la eficiencia administrativa y garantiza la coherencia en la configuración de red en toda la infraestructura.</p>
<p>El protocolo DHCP está disponible tanto para direcciones IPv4 (DHCPv4) como para IPv6 (DHCPv6).</p>
<h3 id="terminologia-dhcp">Terminología DHCP</h3>
<p>Antes de proceder con la configuración del servicio DHCP, es fundamental comprender algunos términos clave que se utilizarán a lo largo del proceso:</p>
<ul>
<li><strong>Ámbito</strong>: Es el rango completo y consecutivo de direcciones IP que pertenecen a una subred específica. Por ejemplo, en la subred 192.168.0.0/24, el ámbito comprende desde 192.168.0.1 hasta 192.168.0.254. El ámbito es el elemento principal que gestiona un servidor DHCP, ya que define el conjunto de direcciones IP y parámetros de red que se asignarán dinámicamente a los dispositivos de la red.</li>
<li><strong>Intervalo de exclusión</strong>: Es una serie específica de direcciones IP dentro del ámbito que el servidor no asignará a los clientes. Estas direcciones suelen reservarse para dispositivos con direcciones IP estáticas o para evitar conflictos.</li>
<li><strong>Conjunto de direcciones</strong>: Una vez definido el ámbito y establecidos los intervalos de exclusión, las direcciones IP restantes forman el pool disponible que el servidor DHCP puede utilizar para asignar direcciones dinámicamente a los clientes de la red.</li>
<li><strong>Concesión</strong>: Es el periodo de tiempo durante el cual un cliente puede utilizar una dirección IP que le ha sido asignada por el servidor DHCP. La concesión está activa mientras no haya expirado. Antes de que termine dicho plazo, el cliente debe intentar renovar la concesión. Una concesión se considera inactiva cuando ha expirado o ha sido eliminada del servidor.</li>
<li><strong>Reserva</strong>: Se trata de una asignación fija de dirección IP a un cliente concreto dentro de la red. La dirección es gestionada por el servidor DHCP, pero está reservada exclusivamente para ese dispositivo. Este método se utiliza con frecuencia en equipos que prestan servicios específicos, como servidores de impresión o servidores web.</li>
<li><strong>Tipos de opciones</strong>: Son parámetros adicionales de configuración que el servidor DHCP puede proporcionar junto con la dirección IP. Entre las más comunes se incluyen:<ul>
<li>Dirección IP de la puerta de enlace predeterminada (router)</li>
<li>Servidor DNS</li>
<li>Servidor WINS</li>
</ul>
</li>
</ul>
<p>Estas opciones suelen configurarse por ámbito, para garantizar que todos los clientes reciban la información necesaria para operar correctamente en la red.</p>
<p>La eficacia del servicio DHCP reside en el concepto de concesión, ya que permite gestionar dinámicamente la asignación de direcciones IP. Para optimizar este proceso, es recomendable planificar adecuadamente la duración de las concesiones, en función del tipo de red y del comportamiento de los dispositivos conectados.</p>
<p>Uno de los riesgos asociados es que, si las direcciones IP no se liberan correctamente al finalizar su uso, el servidor DHCP puede quedarse sin direcciones disponibles, lo que impediría atender nuevas solicitudes de asignación por parte de los clientes.</p>
<p>En entornos donde los dispositivos se conectan y desconectan frecuentemente, como en redes escolares o oficinas comerciales, conviene configurar concesiones de corta duración. Esto permite que las direcciones se reciclen con rapidez y estén disponibles para otros dispositivos.</p>
<p>Por el contrario, en redes donde predominan equipos estáticos que permanecen conectados de forma continua y rara vez se reinician, resulta más adecuado asignar concesiones de mayor duración, reduciendo así la necesidad de renovaciones frecuentes y el tráfico asociado.</p>
<h2 id="dhcpv4">DHCPv4</h2>
<p>El protocolo DHCPv4 se encarga de asignar direcciones IPv4 y otros parámetros de configuración de red a los dispositivos de forma dinámica. Dado que los clientes de escritorio suelen representar una parte significativa de los nodos en una red, DHCPv4 se convierte en una herramienta esencial para los administradores de red.</p>
<p>En redes de mayor tamaño, se suele utilizar un servidor DHCPv4 dedicado, ya que ofrece escalabilidad y facilidad de gestión. Sin embargo, en entornos más reducidos, es posible configurar un router como servidor DHCPv4, sin necesidad de incorporar un servidor específico. El sistema operativo Cisco IOS incluye soporte para funciones completas de servidor DHCPv4.</p>
<p>El servidor DHCPv4 asigna dinámicamente (o alquila) direcciones IPv4 a los dispositivos a partir de un conjunto definido de direcciones disponibles, durante un período de tiempo limitado. Este intervalo de tiempo es establecido por el servidor o hasta que el cliente deje de necesitar la dirección asignada.</p>
<p>La duración del arrendamiento puede configurarse de forma administrativa. Generalmente, oscila entre 24 horas y una semana o más, según las necesidades de la red. Una vez que el arrendamiento expira, el cliente debe solicitar una nueva dirección, aunque normalmente el servidor vuelve a asignar la misma IP, siempre que esté disponible.</p>
<h3 id="funcionamiento-del-protocolo">Funcionamiento del protocolo</h3>
<p>En una red con servidor DHCP, este dispositivo es el encargado de proporcionar automáticamente la configuración IP a todos los dispositivos conectados. Por lo general, el servidor DHCP tiene una dirección IP configurada de forma estática, asignada por el administrador de red.</p>
<p>Cuando un dispositivo se conecta a la red, solicita su configuración IP al servidor, que le asigna una dirección disponible dentro del rango gestionado. Es posible establecer que ciertos equipos reciban siempre la misma dirección IP (mediante reservas) o excluir determinadas direcciones del rango disponible para que se asignen manualmente a equipos específicos (como servidores o impresoras).</p>
<p>Si, por error, se dejara un equipo con direccionamiento IP estático dentro del mismo rango gestionado por el servidor DHCP, podría producirse un conflicto de direcciones IP. En ese caso, cuando el servidor conceda una dirección a otro cliente, podría coincidir con la IP ya usada por el equipo con configuración manual.</p>
<p>Para prevenir este tipo de conflictos, los servidores DHCP incorporan mecanismos de detección de duplicados, como el uso de mensajes ARP antes de confirmar una concesión.</p>
<p>El comportamiento del protocolo DHCP puede variar dependiendo de si el cliente ya contaba anteriormente con una concesión o si está realizando la primera solicitud de configuración IP.</p>
<h4 id="el-cliente-dispone-de-una-concesion-previa">El cliente dispone de una concesión previa</h4>
<p>Cuando un cliente DHCP ha obtenido previamente una concesión de un servidor DHCP, y se inicia de nuevo, su comportamiento depende del estado de dicha concesión:</p>
<ul>
<li>Si la concesión ha expirado, el cliente solicitará una nueva concesión al servidor DHCP. En muchos casos, el servidor puede optar por asignarle la misma dirección IP anterior.</li>
<li>Si la concesión aún es válida en el momento del arranque, el cliente intentará renovar la concesión para seguir utilizando la misma dirección IP.</li>
<li>Si, al intentar renovar la concesión, el cliente no logra contactar con un servidor DHCP, procederá de la siguiente manera:</li>
<li>Enviará un ping a la puerta de enlace predeterminada asociada a su concesión anterior.</li>
<li>Si el resultado del ping es positivo, el cliente asumirá que sigue conectado a la misma red y continuará utilizando la configuración existente.</li>
<li>Si el resultado del ping es negativo, el cliente considerará que ha sido movido a otra red, posiblemente sin servicio DHCP disponible. En ese caso, se autoconfigurará con una dirección link-local de clase B, perteneciente al rango 169.254.0.0/16.</li>
<li>Una vez asignada esta dirección temporal, el cliente continuará buscando en segundo plano un servidor DHCP disponible cada cinco minutos. Si lo encuentra, desechará la configuración automática y aceptará los nuevos parámetros ofrecidos por el servidor.</li>
</ul>
<h4 id="el-cliente-no-dispone-de-una-concesion-previa">El cliente no dispone de una concesión previa</h4>
<p>Si el cliente nunca ha recibido una concesión anterior de un servidor DHCP, el proceso es el siguiente:</p>
<ol>
<li>El cliente intenta localizar un servidor DHCP en la red y obtener de él una configuración válida (dirección IP, máscara de subred, puerta de enlace, etc.).</li>
<li>Si no se encuentra ningún servidor DHCP, el cliente se autoconfigura con una dirección IP y una máscara de subred dentro del rango 169.254.0.0/16, correspondiente a la red link-local de clase B.</li>
<li>A partir de ese momento, el cliente continuará intentando localizar un servidor DHCP cada cinco minutos. Si finalmente lo encuentra:<ul>
<li>Descartará la configuración automática.</li>
<li>Aplicará la dirección IP y los parámetros de red proporcionados por el servidor DHCP, actualizando su configuración de red de forma dinámica.</li>
</ul>
</li>
</ol>
<h4 id="intercambio-de-mensajes-del-protocolo">Intercambio de mensajes del protocolo</h4>
<p>El proceso mediante el cual un cliente DHCP, como un PC, obtiene una configuración IP completa desde un servidor DHCP implica el intercambio de una serie de mensajes definidos por el protocolo. A continuación se describen las fases de este proceso:</p>
<ol>
<li>El cliente envía un mensaje DHCPDISCOVER en modo broadcast dentro de su subred física.<ul>
<li>Este mensaje se utiliza para localizar servidores DHCP disponibles.</li>
<li>Puede incluir opciones como una dirección IP sugerida, duración del arrendamiento deseada u otros parámetros.</li>
</ul>
</li>
<li>Los servidores DHCP que reciben el mensaje pueden responder con un mensaje DHCPOFFER.<ul>
<li>Este mensaje incluye una dirección IP disponible y otros parámetros de configuración como máscara de subred, puerta de enlace, DNS, etc.</li>
</ul>
</li>
<li>El cliente puede recibir uno o más mensajes DHCPOFFER procedentes de diferentes servidores.<ul>
<li>Tras analizar las ofertas, el cliente selecciona una y responde enviando un mensaje DHCPREQUEST también en broadcast.</li>
<li>En el mensaje DHCPREQUEST se incluye el identificador del servidor seleccionado, indicando cuál de las ofertas ha aceptado.</li>
</ul>
</li>
<li>Todos los servidores reciben el mensaje DHCPREQUEST:<ul>
<li>Los servidores no seleccionados interpretan el mensaje como una renuncia a su oferta.</li>
<li>El servidor seleccionado confirma la asignación enviando un mensaje DHCPACK, que contiene los parámetros de configuración definitivos.</li>
<li>En este punto, el servidor almacena la información del arrendamiento, que incluye tanto la dirección MAC del cliente como la IP asignada, formando así un identificador único del arrendamiento.</li>
<li>El campo “your IP address” del mensaje DHCPACK contiene la dirección IP que el cliente usará.</li>
</ul>
</li>
<li>El cliente recibe el mensaje DHCPACK con todos los parámetros de red.<ul>
<li>Realiza un chequeo final, como un ARP para verificar que la dirección IP asignada no está siendo utilizada.</li>
<li>Si no hay conflicto, registra la información del arrendamiento (dirección IP, duración y cookie identificadora) y se considera configurado correctamente.</li>
<li>Si detecta un problema, envía un mensaje DHCPDECLINE al servidor y reinicia el proceso desde el paso 1, esperando al menos 10 segundos para evitar generar tráfico excesivo en caso de errores persistentes.</li>
</ul>
</li>
<li>Si el cliente desea liberar su dirección IP antes de que expire el arrendamiento, puede enviar un mensaje DHCPRELEASE al servidor.<ul>
<li>En este mensaje se identifican las direcciones MAC e IP del cliente, indicando que el arrendamiento ha finalizado.</li>
</ul>
</li>
</ol>
<p>Este intercambio garantiza que los dispositivos obtengan configuraciones válidas y sin conflictos, automatizando el proceso de integración en la red.</p>
<h3 id="configurar-un-servidor-dhcpv4-basico">Configurar un servidor DHCPv4 básico</h3>
<p>Un router Cisco que ejecuta el sistema operativo IOS puede ser configurado para operar como servidor DHCPv4. En este modo, el router se encarga de asignar y administrar direcciones IPv4 para los clientes de red, utilizando conjuntos de direcciones definidos internamente.</p>
<p>El servidor DHCPv4 integrado en Cisco IOS permite ofrecer direcciones IP, junto con otros parámetros de configuración de red, a los dispositivos que lo soliciten, sin necesidad de desplegar un servidor dedicado.</p>
<p>Para ilustrar esta funcionalidad, se utilizará una red de ejemplo, en la que el router R1 dispone de dos interfaces ya configuradas con sus respectivas direcciones IP y máscaras de subred.</p>
<center>![Escenario DHCPv4](assets/images/ud4/img13.png){ width="700" }</center>

<p>A continuación, se detallarán todos los pasos necesarios para configurar un servidor DHCP completo en el router R1, permitiendo así la distribución automática de direcciones IPv4 y parámetros adicionales a los clientes conectados.</p>
<h4 id="paso-1-excluir-direcciones-ipv4">Paso 1: Excluir direcciones IPv4</h4>
<p>Cuando un router Cisco se configura como servidor DHCPv4, asigna direcciones IPv4 a los clientes a partir de un conjunto predefinido. Por defecto, todas las direcciones del rango configurado están disponibles, salvo que se especifiquen exclusiones.</p>
<p>Generalmente, es necesario reservar ciertas direcciones para dispositivos que requieren una configuración manual o fija, como routers, servidores o impresoras. Para evitar que estas direcciones se asignen dinámicamente a otros dispositivos, se deben excluir explícitamente del pool DHCP utilizando el comando:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>ip dhcp excluded-address
</span></code></pre></div>
<p>A continuación, se muestra un ejemplo en el que se desea excluir las nueve primeras direcciones y la última del segmento 192.168.0.0/24:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>R1&gt;  
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>R1&gt;enable  
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>R1#configure terminal  
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>Enter configuration commands, one per line. End with CNTL/Z.  
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>R1(config)#ip dhcp excluded-address 192.168.0.1 192.168.0.9  
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>R1(config)#ip dhcp excluded-address 192.168.0.254  
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>R1(config)#  
</span></code></pre></div>
<p>El comando permite excluir tanto rango de direcciones (especificando la dirección inicial y final) como direcciones individuales. Es importante asegurarse de incluir aquí todas las direcciones que han sido o serán configuradas de forma estática.</p>
<h4 id="paso-2-crear-un-pool-dhcpv4">Paso 2: Crear un pool DHCPv4</h4>
<p>El siguiente paso en la configuración del servidor DHCP consiste en definir el conjunto de direcciones (pool) desde el cual se asignarán direcciones IP a los clientes.</p>
<p>Para ello, se utiliza el comando:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ip dhcp pool &lt;nombre-del-pool&gt;
</span></code></pre></div>
<p>Este comando crea el pool DHCP con el nombre especificado y cambia el modo de configuración del router al modo dhcp-config, tal como se muestra en el ejemplo:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>R1(config)#ip dhcp pool LAN1  
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>R1(dhcp-config)#  
</span></code></pre></div>
<p>Desde este modo, se puede continuar con la configuración de los parámetros específicos del conjunto DHCP.</p>
<h4 id="paso-3-configurar-los-tipos-de-opciones-en-el-pool-dhcpv4">Paso 3: Configurar los tipos de opciones en el pool DHCPv4</h4>
<p>Para que un dispositivo pueda conectarse correctamente a una red y acceder a Internet, no basta con asignarle una dirección IPv4 y una máscara de subred. Existen otros parámetros necesarios, conocidos como tipos de opciones DHCP, que deben configurarse dentro del pool.</p>
<p>A continuación se describen las principales opciones que se pueden establecer en la configuración de un pool DHCPv4:</p>
<ul>
<li><strong>Conjunto de direcciones</strong>: Se define con el comando network dirección-red máscara. Este comando determina el rango de direcciones IP disponibles para asignación dentro del ámbito.</li>
<li><strong>Gateway predeterminado (router)</strong>: Se establece con el comando default-router dirección-IP. Habitualmente corresponde a la interfaz LAN del router más cercano. Se puede especificar hasta un máximo de ocho direcciones si hay múltiples gateways disponibles.</li>
<li><strong>Servidor DNS</strong>: Se configura con el comando dns-server dirección-IP. Esta opción indica qué servidor DNS utilizarán los clientes DHCP para la resolución de nombres.</li>
<li><strong>Nombre de dominio</strong>: Se define con domain-name nombre-dominio, permitiendo establecer el dominio asociado a la red.</li>
<li><strong>Duración del arrendamiento</strong>: Se ajusta mediante el comando lease días [horas [minutos]]. El valor predeterminado es de 1 día, pero puede modificarse según las necesidades de la red.</li>
<li><strong>Servidor NetBIOS (WINS)</strong>: Se establece con el comando netbios-name-server dirección-IP, utilizado si la red requiere soporte para nombres NetBIOS.</li>
</ul>
<p>Ejemplo de configuración del pool para LAN1:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>R1&gt;enable  
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>R1#configure terminal  
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>Enter configuration commands, one per line. End with CNTL/Z.  
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>R1(config)#ip dhcp pool LAN1  
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>R1(dhcp-config)#network 192.168.0.0 255.255.255.0  
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>R1(dhcp-config)#default-router 192.168.0.1  
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>R1(dhcp-config)#dns-server 192.168.1.10  
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>R1(dhcp-config)#  
</span></code></pre></div>
<p>Ejemplo de configuración del pool para LAN2:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>R1&gt;enable  
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>R1#configure terminal  
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Enter configuration commands, one per line. End with CNTL/Z.  
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>R1(config)#ip dhcp pool LAN2  
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>R1(dhcp-config)#network 192.168.1.0 255.255.255.0  
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>R1(dhcp-config)#default-router 192.168.1.1  
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>R1(dhcp-config)#dns-server 192.168.1.10  
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>R1(dhcp-config)#  
</span></code></pre></div>
<p>Una vez que se configuran ambos pools y los PCs están preparados para obtener su configuración IP de forma dinámica, cada uno de ellos obtendrá la primera dirección disponible del pool correspondiente.</p>
<p>Es posible que, en el caso de la segunda LAN, aparezca un mensaje como el siguiente:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>%DHCPD-4-PING_CONFLICT: DHCP address conflict: server pinged 192.168.1.1.
</span></code></pre></div>
<p>Este mensaje indica que el servidor intentó asignar la dirección 192.168.1.1, pero detectó que ya está en uso, probablemente porque fue asignada estáticamente al router. En ese caso, el servidor DHCP detecta el conflicto y asigna automáticamente la siguiente dirección disponible del pool.</p>
<h3 id="verificacion-del-servicio-dhcpv4">Verificación del servicio DHCPv4</h3>
<p>Una vez configurado el servidor DHCPv4 en el router, es posible verificar su funcionamiento utilizando diversos comandos de monitorización y diagnóstico.</p>
<p>El comando show running-config, ejecutado en modo EXEC privilegiado, permite consultar la configuración activa del router. En la sección correspondiente al servicio DHCP, se puede ver la definición de direcciones excluidas y los pools configurados:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>...
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>!
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>ip dhcp excluded-address 192.168.0.1 192.168.0.9  
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>ip dhcp excluded-address 192.168.0.254  
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>!
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>ip dhcp pool LAN1  
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a> network 192.168.0.0 255.255.255.0  
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a> default-router 192.168.0.1  
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a> dns-server 192.168.1.10  
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>!
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>...
</span></code></pre></div>
<p>Para consultar las asignaciones realizadas por el servidor DHCP, se utiliza el comando:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>show ip dhcp binding
</span></code></pre></div>
<p>Este comando muestra la vinculación entre las direcciones IPv4 asignadas y las direcciones MAC de los dispositivos que las recibieron. Ejemplo de salida:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>Router#show ip dhcp binding  
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>IP address      Client-ID/           Lease expiration      Type  
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>                Hardware address  
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>192.168.0.10    0010.11A5.A6C6        --                    Automatic  
</span></code></pre></div>
<p>También se puede verificar el funcionamiento general del servicio DHCP con:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>show ip dhcp server statistics
</span></code></pre></div>
<p>Este comando ofrece información estadística sobre el número de mensajes DHCPv4 enviados y recibidos, útil para diagnosticar problemas de comunicación entre clientes y servidor.</p>
<p>Si se desea consultar estadísticas específicas por pool, se emplea el comando:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>show ip dhcp pool &lt;nombre-del-pool&gt;
</span></code></pre></div>
<p>Por ejemplo:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>R1#show ip dhcp pool LAN2  
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>Pool LAN2 :  
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a> Utilization mark (high/low) : 100 / 0  
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a> Subnet size (first/next)    : 0 / 0  
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a> Total addresses             : 254  
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a> Leased addresses            : 1  
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a> Excluded addresses          : 2  
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a> Pending event               : none  
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a> 1 subnet is currently in the pool  
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a> Current index  
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a> IP address range            Leased/Excluded/Total  
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a> 192.168.1.1                 192.168.1.1 - 192.168.1.254   1 / 2 / 254  
</span></code></pre></div>
<h3 id="configuracion-de-un-router-como-cliente-dhcpv4">Configuración de un router como cliente DHCPv4</h3>
<p>En determinadas situaciones, un router Cisco puede requerir actuar como cliente DHCPv4, al igual que un dispositivo final. Esto es común cuando el router se conecta, por ejemplo, a un módem de cable o módem DSL a través de una interfaz Ethernet.</p>
<p>Para configurar una interfaz como cliente DHCP, se accede al modo de configuración de interfaz y se utiliza el comando:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>ip address dhcp
</span></code></pre></div>
<p>Este comando permite que la interfaz obtenga su dirección IP y configuración de red automáticamente desde un servidor DHCP disponible.</p>
<h2 id="descripcion-de-la-practica">Descripción de la práctica</h2>
<p>Configura el escenario que se muestra más arriba</p>
<h2 id="entrega-de-la-practica">Entrega de la práctica</h2>
<p>Crea y configura el escenario y súbelo en el lugar de la plataforma Moodle Centros habilitado para ello, con el siguiente nombre:</p>
<p><strong>Apellido1Apellido2_Nombre_PAR_UD4_P5.pkt</strong></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2025 José María Pérez Puentes - Licencia CC BY-NC-SA 4.0
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>